#+title: Inventory users that have sudo access

* Synopsis

- *Name*: =inventory-sudoers=
- *Version*: =1.0.1=
- *Description*: Inventory users that have sudo access from a set of users.

* Requirements

- CFEngine version 3.18.0 or greater (in order to configure without modification)

* Variables

-  /nickanderson:_inventory_sudoers_main._users_list_var/ (=String=) :: Defines the name of the variable expected to hold a set of users to evaluate for sudo access, defaults to =nickanderson:_inventory_sudoers_main._users=

-  /nickanderson:_inventory_sudoers_main._users/ (=List=) :: The default variable to use when evaluating sudo access which defaults to the list of users from =/etc/passwd=

-  /nickanderson:_inventory_sudoers_main._refresh_frequency_min/ (=Int=) :: How long to wait before clearing cache and re-evaluating which users have sudo access, by default =30=

* Examples

** Set the list of users to check for sudo access

As of 3.18.0, [[https://docs.cfengine.com/docs/3.18/reference-language-concepts-augments.html][Augments]] allows variables to be defined in a specific bundle by leveraging the [[https://docs.cfengine.com/docs/3.18/reference-language-concepts-augments.html#variables][variables key]].

This Augments sets the list of users to check for sudo access:

#+begin_src json
  {
    "variables": {
      "nickanderson:_inventory_sudoers_main._users": [ "luke.skywalker",
                                                       "minch.yoda",
                                                       "obiwan.kenobi" ]
    }
  }
#+end_src

* Installation via cfbs

#+begin_example
❯ cfbs search inventory-sudoers
inventory-sudoers - Inventory users with sudo access.
❯ cfbs add inventory-sudoers
Added module: inventory-sudoers
#+end_example
